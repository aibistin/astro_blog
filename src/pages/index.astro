---
import SocialList from "@/components/SocialList.astro";
import PostPreview from "@/components/blog/PostPreview.astro";
import PageLayout from "@/layouts/Base.astro";
import { getAllPosts, sortMDByDate } from "@/utils";
import { Icon } from "astro-icon/components";

const MAX_POSTS = 10;
const allPosts = await getAllPosts();
const latestPosts = sortMDByDate(allPosts).slice(0, MAX_POSTS);

const cactusTech: { desc: string; href: string; icon: string; title: string }[] = [
	{
		desc: "Build anything, faster.",
		href: "https://www.perl.org",
		icon: "skill-icons:perl",
		title: "Perl",
	},
	{
		desc: "Work quickly and integrate systems more effectively.",
		href: "https://www.python.org/",
		icon: "skill-icons:python-light",
		title: "Python",
	},
	{
		desc: "Build fast websites, faster.",
		href: "https://astro.build",
		icon: "skill-icons:astro",
		title: "Astro",
	},
	{
		desc: "Rapidly build modern websites without ever leaving your HTML.",
		href: "https://tailwindcss.com",
		icon: "skill-icons:tailwindcss-light",
		title: "Tailwind CSS",
	},
	{
		desc: "Markdown for the component era.",
		href: "https://mdxjs.com/",
		icon: "skill-icons:markdown-light",
		title: "MDX",
	},
	{
		desc: "The World's Most Advanced Open Source Relational Database.",
		href: "https://postgresql.org",
		icon: "skill-icons:postgresql-light",
		title: "PostgreSQL",
	},
	{
		desc: "Run JavaScript Everywhere.",
		href: "https://nodejs.org/",
		icon: "skill-icons:nodejs-light",
		title: "Node.js",
	},
	{
		desc: "Avoid the Gates of Hell. Use Linux.",
		href: "https://www.linux.org/",
		icon: "skill-icons:linux-light",
		title: "Linux",
	},
	{
		desc: "The most used database engine in the world.",
		href: "https://sqlite.org/",
		icon: "skill-icons:sqlite",
		title: "SQLite",
	},
	// {
	// 	desc: "An easy to use Icon component for Astro.",
	// 	href: "https://github.com/natemoo-re/astro-icon#readme",
	// 	title: "Astro Icon",
	// 	icon: "skill-icons:github-light",
	// },
	// {
	// 	desc: "Highly customisable source code & syntax highlighter",
	// 	href: "https://expressive-code.com/",
	// 	title: "Expressive Code",
	// 	icon: "skill-icons:astro",
	// },
];
---

<PageLayout meta={{ title: "Home" }}>
	{/* Hero Section */}
	<section class="hero">
		<h1 class="hero-title">Hi!</h1>
		<p class="hero-subtitle">
			Welcome to my code blog, where I share knowledge and experience in software development.
		</p>
		<div class="my-6">
			<SocialList />
		</div>
	</section>

	{/* Latest Blog Posts */}
	<section aria-label="Latest blog posts" class="latest-posts mt-12">
		<h2 class="title mb-4 text-xl">Latest Posts</h2>
		<ul class="grid grid-cols-1 gap-4 md:grid-cols-2">
			{
				latestPosts.map((p) => (
					<li>
						{/* @ts-expect-error */}
						<PostPreview post={p} />
					</li>
				))
			}
		</ul>

		{/* Optional CTA to view all posts */}
		<!-- <a href="/posts" class="cta-button">View All Posts</a> -->
		<div class="mt-6">
			<a
				class="cta-button textColor mr-6 flex items-center rounded bg-bgColor font-bold shadow-sm transition duration-300 hover:text-accent hover:shadow-md"
				href="/posts"
			>
				<Icon name="mdi:arrow-right" />View All Posts</a
			>
		</div>
	</section>

	{/* Technologies Section */}
	<section class="technologies mt-12">
		<h2 class="title mb-4 text-xl">Technologies I Use</h2>
		<ul class="grid grid-cols-2 gap-4 md:grid-cols-3">
			{
				cactusTech.map(({ desc, href, icon, title }) => (
					<li class="flex flex-col items-center">
						<Icon class="mb-2 h-12 w-12" name={icon} />
						<a class="cactus-link" href={href} rel="noopener noreferrer" target="_blank">
							{title}
						</a>
						<p class="text-sm">{desc}</p>
					</li>
				))
			}
		</ul>
	</section>
</PageLayout>
